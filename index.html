<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ“š ä½œæ¥­ç¹³äº¤ç³»çµ±ï½œGoogle ç™»å…¥ç‰ˆ</title>
  <!-- åœ–ç¤º -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Firebase SDK v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <style>
    /* ====== ä½ çš„åŸå§‹ CSSï¼Œå®Œå…¨ä¿ç•™ ====== */
    :root{
      --bg:#f0f9ff; --card:#fff; --muted:#64748b;
      --primary:#3b82f6; --accent:#14b8a6; --success:#22c55e; --danger:#ef4444;
      --ring:rgba(59, 130, 246, 0.3); --shadow:0 8px 30px rgba(100,116,139,.1); --radius:16px;
      --text-main: #1e293b; --text-light: #475569;
      --tbl-border:#e2e8f0; --tbl-head:#e0f2fe; --tbl-alt:#f8fafc; --tbl-hover:#ecfeff;
    }
    html[data-theme='dark'] {
      --bg:#0f172a; --card:#1e293b; --muted:#94a3b8;
      --primary:#60a5fa; --accent:#2dd4bf; --success:#4ade80; --danger:#f87171;
      --ring:rgba(96, 165, 250, 0.3); --shadow:0 8px 30px rgba(0,0,0,.1);
      --text-main: #e2e8f0; --text-light: #94a3b8;
      --tbl-border:#334155; --tbl-head:#1e293b; --tbl-alt:#0f172a; --tbl-hover:#334155;
    }
    *{ box-sizing:border-box; }
    input, select, textarea{ max-width:100%; }
    html, body{ height:100%; }
    body{
      margin:0;
      font-family:"Microsoft JhengHei", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
      background: var(--bg);
      color: var(--text-main);
      transition: background-color .3s, color .3s;
    }
    .wrap{ max-width:1200px; margin:0 auto; padding:16px 12px 96px; }
    header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .logo{ width:48px; height:48px; border-radius:50%; display:grid; place-items:center; color:#fff; font-size:24px;
      background:linear-gradient(135deg, var(--primary), var(--accent)); box-shadow:var(--shadow); }
    h1{ margin:0; font-size:clamp(18px,2.2vw,24px); font-weight:800; line-height:1.2; }
    .muted{ color:var(--muted); font-size:12px; }
    .badge{ display:inline-flex; gap:6px; align-items:center; padding:6px 10px; border-radius:999px; background:var(--card); border:1px solid var(--tbl-border); font-size:12px; font-weight:800; }

    .card{ background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); border:1px solid transparent; padding:12px; margin-bottom:10px; transition: background-color .3s; }
    html[data-theme='dark'] .card { border-color: var(--tbl-border); }
    .card h2{ margin:0 0 8px; font-size:16px; display:flex; align-items:center; gap:8px; }
    .row{ display:grid; gap:8px; grid-template-columns:repeat(12, 1fr); }
    .field{ grid-column:span 12; display:flex; flex-direction:column; gap:4px; }
    @media (min-width:720px){ .sm-6{ grid-column:span 6; } .sm-4{ grid-column:span 4; } .sm-3{ grid-column:span 3; } .sm-2{ grid-column:span 2; } }
    label{ font-weight:700; font-size:13px; }
    input, select, textarea {
      background:var(--bg); color: var(--text-main); border:1px solid var(--tbl-border); border-radius:10px; padding:10px; font-size:14px; outline:none; transition:.2s ease;
    }
    input:focus, select:focus, textarea:focus{ border-color:var(--primary); box-shadow:0 0 0 4px var(--ring); }
    
    .actions{ display:flex; flex-wrap:wrap; gap:8px; margin-top:6px; }
    .btn{ border:none; border-radius:999px; padding:8px 14px; font-weight:800; cursor:pointer; display:inline-flex; align-items:center; gap:6px;
      background:var(--primary); color:#fff; box-shadow:var(--shadow); font-size:14px; transition:transform .05s, filter .2s, background .2s; }
    .btn:hover{ filter:brightness(1.05); } .btn:active{ transform:translateY(1px); }
    .btn.outline{ background:transparent; color:var(--primary); border:2px solid var(--primary); }
    .btn.ghost{ background:var(--card); color:var(--text-light); border:1px dashed var(--tbl-border); box-shadow: none; }
    .btn.warn{ background:var(--danger); }
    .btn.secondary{ background:var(--accent); color:#fff; }
    .btn.sm{ font-size:12px; padding:4px 10px; }
    .btn:disabled{ background:#ccc; cursor:not-allowed; filter:none; }

    .view{ display:none; } .view.show{ display:block; animation:fadeIn .3s ease; }
    @keyframes fadeIn{ from{ opacity:0; transform:translateY(10px); } to{ opacity:1; transform:translateY(0); } }

    .table-wrap{ overflow:auto; border-radius:12px; border:1px solid var(--tbl-border); background:var(--card); }
    table{ width:100%; border-collapse:collapse; font-size:14px; }
    thead th{ position:sticky; top:0; background:var(--tbl-head); text-align:left; padding:10px; border-bottom:1px solid var(--tbl-border); white-space:nowrap; cursor:pointer; user-select:none; }
    tbody td{ padding:10px; border-bottom:1px solid var(--tbl-border); }
    tbody tr{ cursor:pointer; }
    tbody tr:nth-child(odd){ background:var(--tbl-alt); }
    tbody tr:hover{ background:var(--tbl-hover); }
    
    .pill{ display:inline-flex; gap:6px; align-items:center; padding:4px 8px; border-radius:999px; font-weight:800; }
    .p-gray{ background:#f1f5f9; color:#475569; } .p-yellow{ background:#fefce8; color:#854d0e; }
    .p-orange{ background:#fff7ed; color:#9a3412; } .p-green{ background:#f0fdf4; color:#166534; }

    .grid{ display:grid; gap:var(--grid-gap); grid-template-columns:repeat(auto-fill, minmax(calc(var(--seat) + 70px), 1fr));
      background:var(--bg); border:1px solid var(--tbl-border); border-radius:var(--radius); padding:var(--grid-pad); }
    .seat{ width:var(--seat); height:var(--seat); border-radius:50%; display:grid; place-items:center; font-weight:900; font-size:var(--seat-font);
      border:2px solid transparent; cursor:pointer; user-select:none; box-shadow:var(--shadow); transition:transform .06s; flex:0 0 auto; }
    html[data-theme='dark'] .seat { border-color: var(--tbl-border); }
    .seat:active{ transform:scale(.98); }
    .s0{ background:#e2e8f0; color:#334155; } .s1{ background:#fef9c3; color:#713f12; }
    .s2{ background:#ffedd5; color:#9a3412; } .s3{ background:#dcfce7; color:#166534; }
    .seatName{ flex:1 1 auto; font-size:13px; font-weight:800; line-height:1.2; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .roster-wrapper{ max-height: 56vh; overflow:auto; border:1px solid var(--tbl-border); border-radius:12px; padding:10px; background:var(--bg); }
    .roster-grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(180px, 1fr)); gap:8px; }
    .roster-item{ display:flex; align-items:center; gap:6px; background:var(--card); border:1px solid var(--tbl-border); border-radius:10px; padding:6px; }
    .badge-no{ min-width:24px; height:24px; border-radius:999px; display:grid; place-items:center; font-weight:900; font-size:12px;
      background:var(--bg); color:var(--primary); border:1px solid var(--tbl-border); }
    
    .student-status-list { list-style-type: none; padding-left: 0; margin-top: 8px; margin-bottom: 0; }
    .student-status-list li { padding: 8px; border-bottom: 1px solid var(--tbl-border); display: flex; justify-content: space-between; align-items: center; font-size: 14px; cursor: pointer; transition: background-color .2s; }
    .student-status-list li:hover { background-color: var(--tbl-hover); }
    .student-status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 12px; align-items: start; }

    #login-view { text-align: center; padding-top: 10vh; }
    .main-app { display: none; }
    .user-info { display: none; align-items: center; gap: 8px; }
  </style>
</head>
<body>
  <!-- ç™»å…¥ç•«é¢ -->
  <div id="login-view" class="wrap">
    <div class="card" style="max-width: 400px; margin: auto;">
      <div class="logo" style="margin: 0 auto 16px; width:64px; height:64px; font-size:32px;">ğŸ’</div>
      <h2 style="justify-content: center;">ä½œæ¥­ç¹³äº¤ç³»çµ±</h2>
      <p class="muted">è«‹ä½¿ç”¨ Google å¸³è™Ÿç™»å…¥ï¼Œå³å¯åœ¨å¤šå€‹è£ç½®é–“åŒæ­¥æ‚¨çš„è³‡æ–™ã€‚</p>
      <div class="actions" style="justify-content: center;">
        <button class="btn" id="btn-google-login">
          <svg width="20" height="20" viewBox="0 0 512 512" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M473.16 221.48l-2.26-9.59H262.46v88.22h119.92c-5.4 33.68-23.24 62.42-51.84 81.56v57.17h73.45c42.84-39.52 67.62-98.04 67.62-165.7v-51.66z"/><path d="M262.46 496c65.04 0 119.5-21.36 159.32-57.17l-73.45-57.17c-21.36 14.28-48.78 22.85-85.87 22.85-65.57 0-121.05-44.13-140.92-103.21H48.1v58.9c29.18 57.7 86.4 96.34 159.32 96.34v.02z" fill="#34a853"/><path d="M121.54 301.21c-4.28-12.85-6.85-26.27-6.85-40.12s2.57-27.27 6.85-40.12V162H48.1C32.14 194.21 24 230.85 24 269.9s8.14 75.69 24.1 107.9l73.44-58.59z" fill="#fbbc04"/><path d="M262.46 104.18c35.42 0 67.06 12.28 92 36.57l65.04-65.04C381.96 34.33 327.5 16 262.46 16c-72.92 0-130.14 38.64-159.32 96.34l73.44 58.9c19.87-59.08 75.35-103.22 140.92-103.22z" fill="#ea4335"/></svg>
          ä½¿ç”¨ Google å¸³è™Ÿç™»å…¥
        </button>
      </div>
      <textarea id="firebaseConfig" rows="5" placeholder="åˆæ¬¡ä½¿ç”¨è«‹è²¼ä¸Š Firebase è¨­å®šæª”..." style="margin-top:20px; width: 100%; display:none;"></textarea>
      <button class="btn ghost sm" id="btn-show-config" style="margin-top:8px;">é¦–æ¬¡è¨­å®š</button>
    </div>
  </div>

  <!-- ä¸»æ‡‰ç”¨ç¨‹å¼ç•«é¢ -->
  <div class="wrap main-app"></div>

  <!-- åˆ†é›¢çš„ JS æª”æ¡ˆ -->
  <script src="./js/firebase-init.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
